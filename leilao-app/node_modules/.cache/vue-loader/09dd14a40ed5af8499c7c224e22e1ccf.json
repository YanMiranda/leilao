{"remainingRequest":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\leiloes\\FormLeilao.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\leiloes\\FormLeilao.vue","mtime":1711432670544},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBmb3JtYXRkYXRlLCBmb3JtYXREYXRlVG9SZXF1ZXN0IH0gZnJvbSAnQC91dGlsL0RhdGVVdGlsJzsNCmltcG9ydCBTbmFja0JhciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2V4Y2VwdGlvbi9TbmFja0Jhci52dWUnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdGb3JtTGVpbGFvJywNCg0KICBjb21wb25lbnRzOiB7DQogICAgU25hY2tCYXIsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm57DQogICAgICBrZXk6IDAsDQogICAgICBtZW51OiBmYWxzZSwNCiAgICAgIHZhbGlkOiBmYWxzZSwNCiAgICAgIGxlaWxhbzogdGhpcy5yZXNldEl0ZW0oKSwNCiAgICAgIGRhdGFQcmV2aXN0YTogJycsDQogICAgICB2ZW5kZWRvclJ1bGVzOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICdPIHZlbmRlZG9yIMOpIG9icmlnYXTDs3JpbycsDQogICAgICAgIHYgPT4gL15cZCskLy50ZXN0KHYpIHx8ICdEZXZlIGNvbnRlciBhcGVuYXMgbsO6bWVyb3MnLA0KICAgICAgXSwNCiAgICAgIGRlc2NyaWNhb1J1bGVzOiBbDQogICAgICAgIHYgPT4gISF2IHx8ICdBIGRlc2NyacOnw6NvIMOpIG9icmlnYXTDs3JpYScsDQogICAgICBdLA0KICAgICAgZm9ybWF0ZGF0ZSwNCiAgICAgIGZvcm1hdERhdGVUb1JlcXVlc3QsDQogICAgfQ0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgdGl0bGUoKSB7DQogICAgICByZXR1cm4gdGhpcy5sZWlsYW8uaWQgPyAnRWRpdGFyIExlaWzDo28nIDogJ0NhZGFzdHJhciBMZWlsw6NvJzsNCiAgICB9LA0KICAgIGRhdGVGb3JtYXRlZCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmRhdGFQcmV2aXN0YSA/IGZvcm1hdGRhdGUodGhpcy5kYXRhUHJldmlzdGEpIDogJyc7DQogICAgfQ0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgJ2RhdGFQcmV2aXN0YSc6IGZ1bmN0aW9uICh2YWwpIHsNCiAgICAgIGZvcm1hdGRhdGUodmFsKTsNCiAgICB9DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIHJlc2V0SXRlbSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiBudWxsLA0KICAgICAgICBjb2RpZ286ICcnLA0KICAgICAgICB2ZW5kZWRvcjogJycsDQogICAgICAgIGluaWNpb1ByZXZpc3RvOiAnJywNCiAgICAgICAgZGVzY3JpY2FvOiAnJywNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgZWRpdEZvcm0oaWQpIHsNCiAgICAgIGF3YWl0IHRoaXMuJGF4aW9zLmdldChgL2xlaWxvZXMvJHtpZH1gKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5sZWlsYW8gPSAgcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICB0aGlzLmRhdGFQcmV2aXN0YSA9IHRoaXMubGVpbGFvLmluaWNpb1ByZXZpc3RvOw0KICAgICAgICAgIHRoaXMua2V5ICs9IDE7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7DQogICAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBvbkNsaWNrQ2FuY2VsYXIoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xlaWxvZXMnKTsNCiAgICAgIHRoaXMubGVpbGFvID0gdGhpcy5yZXNldEl0ZW0oKTsNCiAgICB9LA0KDQogICAgb25DbGlja1NhdmUoKSB7DQogICAgICBpZiAodGhpcy52YWxpZCkgew0KICAgICAgICBjb25zdCBzZW5kT2JqID0gew0KICAgICAgICAgIC4uLnRoaXMubGVpbGFvLA0KICAgICAgICAgIGluaWNpb1ByZXZpc3RvOiBmb3JtYXREYXRlVG9SZXF1ZXN0KHRoaXMuZGF0YVByZXZpc3RhKSwNCiAgICAgICAgfTsNCiAgICAgICAgaWYgKCF0aGlzLmxlaWxhby5pZCkgew0KICAgICAgICAgIHRoaXMuc2F2ZShzZW5kT2JqKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnVwZGF0ZShzZW5kT2JqKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzYXZlKG9iaikgew0KICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2xlaWxvZXMnLCBvYmopDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xlaWxvZXMnKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIHRoaXMuJHJlZnMuU25hY2tCYXIuaW5pdChlcnJvci5yZXNwb25zZS5kYXRhWzBdLm1lbnNhZ2VtLCAnZXJyb3InKTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIHVwZGF0ZShvYmopIHsNCiAgICAgIHRoaXMuJGF4aW9zLnB1dChgL2xlaWxvZXMvJHtvYmouaWR9YCwgb2JqKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sZWlsb2VzJyk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7DQogICAgICAgIH0pOw0KICAgIH0sDQoNCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCiAgICAgIHRoaXMuZWRpdEZvcm0odGhpcy4kcm91dGUucGFyYW1zLmlkKTsNCiAgICB9DQogIH0sDQp9DQo="},{"version":3,"sources":["FormLeilao.vue"],"names":[],"mappings":";AA8GA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"FormLeilao.vue","sourceRoot":"src/views/leiloes","sourcesContent":["<template>\r\n  <v-container fluid>\r\n    <v-card elevation=\"3\" :key=\"key\">\r\n      <v-container fluid>\r\n        <p\r\n          align=\"center\"\r\n          class=\"text-h4\"\r\n          style=\"padding: 15px; color: #138496;\"\r\n        >\r\n          {{ title }}\r\n        </p>\r\n        <v-form v-model=\"valid\">\r\n          <div class=\"row\">\r\n            <v-col cols=\"12\" md=\"4\">\r\n              <v-text-field\r\n                clearable\r\n                outlined\r\n                pattern=\"[0-9]*\"\r\n                v-model=\"leilao.codigo\"\r\n                inputmode=\"numeric\"\r\n                label=\"Código do leilão\"\r\n                prepend-icon=\"mdi-format-color-highlight\"\r\n                onkeypress=\"return event.charCode >= 48 && event.charCode <= 57\"\r\n              />\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\" md=\"4\">\r\n              <v-text-field\r\n                clearable\r\n                outlined\r\n                required\r\n                :rules=\"vendedorRules\"\r\n                v-model=\"leilao.vendedor\"\r\n                label=\"Código do vendedor\"\r\n                prepend-icon=\"mdi-account-credit-card-outline\"\r\n              />\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\" md=\"4\">\r\n              <v-menu\r\n                offset-y\r\n                ref=\"menu\"\r\n                v-model=\"menu\"\r\n                max-width=\"290px\"\r\n                min-width=\"auto\"\r\n                transition=\"scale-transition\"\r\n                :close-on-content-click=\"false\"\r\n              >\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                  <v-text-field\r\n                    v-on=\"on\"\r\n                    outlined\r\n                    v-bind=\"attrs\"\r\n                    label=\"Inicio previsto\"\r\n                    prepend-icon=\"mdi-calendar\"\r\n                    v-model=\"dateFormated\"\r\n                    hint=\"Selecione a data de início do leilão\"\r\n                  />\r\n                </template>\r\n                <v-date-picker\r\n                  no-title\r\n                  format=\"dd/MM/yyyy\"\r\n                  v-model=\"dataPrevista\"\r\n                  @input=\"menu = false\"\r\n                />\r\n              </v-menu>\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\">\r\n              <v-textarea\r\n                outlined\r\n                required\r\n                :counter=\"128\"\r\n                maxlength=\"128\"\r\n                :rules=\"descricaoRules\"\r\n                v-model=\"leilao.descricao\"\r\n                label=\"Descrição do leilão\"\r\n              />\r\n            </v-col>\r\n          </div>\r\n        </v-form>\r\n        <v-card-actions class=\"mt-3\">\r\n          <v-btn\r\n            outlined\r\n            elevation=\"2\"\r\n            color=\"error\"\r\n            @click=\"onClickCancelar\"\r\n          >\r\n            <v-icon small>mdi-close</v-icon>\r\n            Cancelar\r\n          </v-btn>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            outlined\r\n            elevation=\"2\"\r\n            color=\"success\"\r\n            :disabled=\"!valid\"\r\n            @click=\"onClickSave\"\r\n          >\r\n            <v-icon small>{{ leilao.id ? 'mdi-pencil' : 'mdi-plus' }}</v-icon>\r\n            {{ leilao.id ? 'Editar' : 'Salvar'}}\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-container>\r\n    </v-card>\r\n    <SnackBar ref=\"SnackBar\"/>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { formatdate, formatDateToRequest } from '@/util/DateUtil';\r\nimport SnackBar from '../../components/exception/SnackBar.vue';\r\n\r\nexport default {\r\n  name: 'FormLeilao',\r\n\r\n  components: {\r\n    SnackBar,\r\n  },\r\n\r\n  data() {\r\n    return{\r\n      key: 0,\r\n      menu: false,\r\n      valid: false,\r\n      leilao: this.resetItem(),\r\n      dataPrevista: '',\r\n      vendedorRules: [\r\n        v => !!v || 'O vendedor é obrigatório',\r\n        v => /^\\d+$/.test(v) || 'Deve conter apenas números',\r\n      ],\r\n      descricaoRules: [\r\n        v => !!v || 'A descrição é obrigatória',\r\n      ],\r\n      formatdate,\r\n      formatDateToRequest,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    title() {\r\n      return this.leilao.id ? 'Editar Leilão' : 'Cadastrar Leilão';\r\n    },\r\n    dateFormated() {\r\n      return this.dataPrevista ? formatdate(this.dataPrevista) : '';\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    'dataPrevista': function (val) {\r\n      formatdate(val);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    resetItem() {\r\n      return {\r\n        id: null,\r\n        codigo: '',\r\n        vendedor: '',\r\n        inicioPrevisto: '',\r\n        descricao: '',\r\n      }\r\n    },\r\n\r\n    async editForm(id) {\r\n      await this.$axios.get(`/leiloes/${id}`)\r\n        .then(response => {\r\n          this.leilao =  response.data;\r\n          this.dataPrevista = this.leilao.inicioPrevisto;\r\n          this.key += 1;\r\n        })\r\n        .catch((error) => {\r\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\r\n        });\r\n    },\r\n\r\n    onClickCancelar() {\r\n      this.$router.push('/leiloes');\r\n      this.leilao = this.resetItem();\r\n    },\r\n\r\n    onClickSave() {\r\n      if (this.valid) {\r\n        const sendObj = {\r\n          ...this.leilao,\r\n          inicioPrevisto: formatDateToRequest(this.dataPrevista),\r\n        };\r\n        if (!this.leilao.id) {\r\n          this.save(sendObj);\r\n        } else {\r\n          this.update(sendObj);\r\n        }\r\n      }\r\n    },\r\n\r\n    save(obj) {\r\n      this.$axios.post('/leiloes', obj)\r\n        .then(() => {\r\n          this.$router.push('/leiloes');\r\n        })\r\n        .catch((error) => {\r\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\r\n        });\r\n    },\r\n\r\n    update(obj) {\r\n      this.$axios.put(`/leiloes/${obj.id}`, obj)\r\n        .then(() => {\r\n          this.$router.push('/leiloes');\r\n        })\r\n        .catch((error) => {\r\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\r\n        });\r\n    },\r\n\r\n  },\r\n\r\n  mounted() {\r\n    if (this.$route.params.id) {\r\n      this.editForm(this.$route.params.id);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}