{"remainingRequest":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue","mtime":1711432722000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUYWJlbGFEaW5hbWljYSBmcm9tICdAL2NvbXBvbmVudHMvdGFibGUvVGFiZWxhRGluYW1pY2EudnVlJzsKaW1wb3J0IHsgZm9ybWF0ZGF0ZXRpbWUgfSBmcm9tICdAL3V0aWwvRGF0ZVV0aWwuanMnOwppbXBvcnQgQ2FkYXN0cmFyVW5pZGFkZSAgZnJvbSAnLi9Gb3JtVW5pZGFkZS52dWUnOwppbXBvcnQgRGlhbG9nRGVsZXRlIGZyb20gJ0AvY29tcG9uZW50cy90YWJsZS9EZWxldGVEaWFsb2cudnVlJzsKaW1wb3J0IFNuYWNrQmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvZXhjZXB0aW9uL1NuYWNrQmFyLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VuaWRhZGVzJywKCiAgY29tcG9uZW50czogewogICAgVGFiZWxhRGluYW1pY2EsCiAgICBDYWRhc3RyYXJVbmlkYWRlLAogICAgRGlhbG9nRGVsZXRlLAogICAgU25hY2tCYXIsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdGRhdGV0aW1lLAogICAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgICAgZGlhbG9nRGVsZXRlOiBmYWxzZSwKICAgICAgc2VsZWN0ZWQ6IG51bGwsCiAgICAgIHVuaWRhZGVzOiBbXSwKICAgICAgZmllbGRzOiBbCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdpZCcsCiAgICAgICAgICB0ZXh0OiAnSUQnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdub21lJywKICAgICAgICAgIHRleHQ6ICdOb21lJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnY3JlYXRlZEF0JywKICAgICAgICAgIHRleHQ6ICdEYXRhIGRlIENyaWHDp8OjbycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3VwZGF0ZWRBdCcsCiAgICAgICAgICB0ZXh0OiAnRGF0YSBkZSBBdHVhbGl6YcOnw6NvJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnYWN0aW9ucycsCiAgICAgICAgICB0ZXh0OiAnQcOnw7VlcycsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgcGFnaW5hdGlvbjogewogICAgICAgIHNvcnRCeTogJ0lEJywKICAgICAgICBwYWdlOiAxLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIHBhZ2VDb3VudDogMSwKICAgICAgICBpdGVtc1BlclBhZ2U6IDEwMCwKICAgICAgfQogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFVuaWRhZGVzKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgZmV0Y2hVbmlkYWRlcygpIHsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KCcvdW5pZGFkZXMnKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMudW5pZGFkZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5sZW5ndGg7CiAgICAgICAgICB0aGlzLmZvcm1hdFVuaWRhZGVzKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGZvcm1hdFVuaWRhZGVzKCkgewogICAgICBpZiAoIXRoaXMudW5pZGFkZXMpIHJldHVybjsKCiAgICAgIHRoaXMudW5pZGFkZXMuZm9yRWFjaCh1bmlkYWRlID0+IHsKICAgICAgICB1bmlkYWRlLmNyZWF0ZWRBdCA9IGZvcm1hdGRhdGV0aW1lKHVuaWRhZGUuY3JlYXRlZEF0KTsKICAgICAgICB1bmlkYWRlLnVwZGF0ZWRBdCA9IGZvcm1hdGRhdGV0aW1lKHVuaWRhZGUudXBkYXRlZEF0KTsKICAgICAgfSk7CiAgICB9LAoKICAgIG9uRWRpdChpdGVtKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpdGVtOwogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlOwogICAgfSwKCiAgICBvbkRlbGV0ZShpdGVtKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpdGVtOwogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IHRydWU7CiAgICB9LAoKICAgIG9uQ2xvc2VEZWxldGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBudWxsOwogICAgfSwKCiAgICBhc3luYyBvbkRlbGV0ZUl0ZW1Db25maXJtKCkgewogICAgICBhd2FpdCB0aGlzLiRheGlvcy5kZWxldGUoYC91bmlkYWRlcy8ke3RoaXMuc2VsZWN0ZWQuaWR9YCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5mZXRjaFVuaWRhZGVzKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIG9uQ2FuY2VsRGlhbG9nKCkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7CiAgICB9LAoKICAgIG9uU2F2ZURpYWxvZyhpdGVtKSB7CiAgICAgIGNvbnN0IHNlbmRPYmogPSB7CiAgICAgICAgLi4uaXRlbSwKICAgICAgICBjcmVhdGVkQXQ6ICcnLAogICAgICAgIHVwZGF0ZWRBdDogJycsCiAgICAgIH07CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy91bmlkYWRlcycsIHNlbmRPYmopCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuU25hY2tCYXIuaW5pdChlcnJvci5yZXNwb25zZS5kYXRhWzBdLm1lbnNhZ2VtLCAnZXJyb3InKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgb25FZGl0RGlhbG9nKGl0ZW0pIHsKICAgICAgY29uc3Qgc2VuZE9iaiA9IHsKICAgICAgICAuLi5pdGVtLAogICAgICAgIGNyZWF0ZWRBdDogJycsCiAgICAgICAgdXBkYXRlZEF0OiAnJywKICAgICAgfTsKICAgICAgdGhpcy4kYXhpb3MucHV0KGAvdW5pZGFkZXMvJHtpdGVtLmlkfWAsIHNlbmRPYmopCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuU25hY2tCYXIuaW5pdChlcnJvci5yZXNwb25zZS5kYXRhWzBdLm1lbnNhZ2VtLCAnZXJyb3InKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgb25BZGQoKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["Unidades.vue"],"names":[],"mappings":";AAkCA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Unidades.vue","sourceRoot":"src/views/unidade","sourcesContent":["<template>\n  <div>\n    <TabelaDinamica\n      title=\"Unidades\"\n      :headers=\"fields\"\n      :items=\"unidades\"\n      :pagination=\"pagination\"\n      :showbtnColumn=\"true\"\n      :showItemsPerPage=\"false\"\n      @onEdit=\"onEdit\"\n      @onDelete=\"onDelete\"\n      @onAdd=\"onAdd\"\n    />\n\n    <CadastrarUnidade\n      ref=\"CadastrarUnidade\"\n      v-if=\"showDialog\"\n      :item=\"selected\"\n      :showDialog=\"showDialog\"\n      @onCancelar=\"onCancelDialog\"\n      @onSalvar=\"onSaveDialog\"\n      @onEdit=\"onEditDialog\"\n    />\n\n    <DialogDelete\n      :dialogDelete=\"dialogDelete\"\n      @onDeleteItem=\"onDeleteItemConfirm\"\n      @onCancelDelete=\"dialogDelete = false\"\n    />\n    <SnackBar ref=\"SnackBar\"/>\n  </div>\n</template>\n\n<script>\nimport TabelaDinamica from '@/components/table/TabelaDinamica.vue';\nimport { formatdatetime } from '@/util/DateUtil.js';\nimport CadastrarUnidade  from './FormUnidade.vue';\nimport DialogDelete from '@/components/table/DeleteDialog.vue';\nimport SnackBar from '../../components/exception/SnackBar.vue';\n\nexport default {\n  name: 'Unidades',\n\n  components: {\n    TabelaDinamica,\n    CadastrarUnidade,\n    DialogDelete,\n    SnackBar,\n  },\n\n  data() {\n    return {\n      formatdatetime,\n      showDialog: false,\n      dialogDelete: false,\n      selected: null,\n      unidades: [],\n      fields: [\n        {\n          value: 'id',\n          text: 'ID',\n          align: 'center',\n        },\n        {\n          value: 'nome',\n          text: 'Nome',\n          align: 'center',\n        },\n        {\n          value: 'createdAt',\n          text: 'Data de Criação',\n          align: 'center',\n        },\n        {\n          value: 'updatedAt',\n          text: 'Data de Atualização',\n          align: 'center',\n        },\n        {\n          value: 'actions',\n          text: 'Ações',\n        },\n      ],\n      pagination: {\n        sortBy: 'ID',\n        page: 1,\n        total: 0,\n        pageCount: 1,\n        itemsPerPage: 100,\n      }\n    };\n  },\n\n  created() {\n    this.fetchUnidades();\n  },\n\n  methods: {\n    fetchUnidades() {\n      this.$axios.get('/unidades')\n        .then(response => {\n          this.unidades = response.data;\n          this.pagination.total = response.data.length;\n          this.formatUnidades();\n        })\n        .catch((error) => {\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    formatUnidades() {\n      if (!this.unidades) return;\n\n      this.unidades.forEach(unidade => {\n        unidade.createdAt = formatdatetime(unidade.createdAt);\n        unidade.updatedAt = formatdatetime(unidade.updatedAt);\n      });\n    },\n\n    onEdit(item) {\n      this.selected = item;\n      this.showDialog = true;\n    },\n\n    onDelete(item) {\n      this.selected = item;\n      this.dialogDelete = true;\n    },\n\n    onCloseDelete() {\n      this.dialogDelete = false;\n      this.selected = null;\n    },\n\n    async onDeleteItemConfirm() {\n      await this.$axios.delete(`/unidades/${this.selected.id}`)\n        .then(() => {\n          this.dialogDelete = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onCancelDialog() {\n      this.showDialog = false;\n      this.selected = null;\n    },\n\n    onSaveDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.post('/unidades', sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onEditDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.put(`/unidades/${item.id}`, sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onAdd() {\n      this.showDialog = true;\n    },\n  }\n};\n</script>\n"]}]}