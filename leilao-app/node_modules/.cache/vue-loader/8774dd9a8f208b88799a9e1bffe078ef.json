{"remainingRequest":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue","mtime":1711432532687},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUYWJlbGFEaW5hbWljYSBmcm9tICdAL2NvbXBvbmVudHMvdGFibGUvVGFiZWxhRGluYW1pY2EudnVlJzsKaW1wb3J0IHsgZm9ybWF0ZGF0ZXRpbWUgfSBmcm9tICdAL3V0aWwvRGF0ZVV0aWwuanMnOwppbXBvcnQgQ2FkYXN0cmFyVW5pZGFkZSAgZnJvbSAnLi9Gb3JtVW5pZGFkZS52dWUnOwppbXBvcnQgRGlhbG9nRGVsZXRlIGZyb20gJ0AvY29tcG9uZW50cy90YWJsZS9EZWxldGVEaWFsb2cudnVlJzsKaW1wb3J0IFNuYWNrQmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvZXhjZXB0aW9uL1NuYWNrQmFyLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VuaWRhZGVzJywKCiAgY29tcG9uZW50czogewogICAgVGFiZWxhRGluYW1pY2EsCiAgICBDYWRhc3RyYXJVbmlkYWRlLAogICAgRGlhbG9nRGVsZXRlLAogICAgU25hY2tCYXIsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdGRhdGV0aW1lLAogICAgICBzbmFja2JhcjogZmFsc2UsCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLAogICAgICBkaWFsb2dEZWxldGU6IGZhbHNlLAogICAgICBzZWxlY3RlZDogbnVsbCwKICAgICAgdW5pZGFkZXM6IFtdLAogICAgICBmaWVsZHM6IFsKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICAgIHRleHQ6ICdJRCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ25vbWUnLAogICAgICAgICAgdGV4dDogJ05vbWUnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdjcmVhdGVkQXQnLAogICAgICAgICAgdGV4dDogJ0RhdGEgZGUgQ3JpYcOnw6NvJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAndXBkYXRlZEF0JywKICAgICAgICAgIHRleHQ6ICdEYXRhIGRlIEF0dWFsaXphw6fDo28nLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdhY3Rpb25zJywKICAgICAgICAgIHRleHQ6ICdBw6fDtWVzJywKICAgICAgICB9LAogICAgICBdLAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgc29ydEJ5OiAnSUQnLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgcGFnZUNvdW50OiAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogMTAwLAogICAgICB9CiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBmZXRjaFVuaWRhZGVzKCkgewogICAgICB0aGlzLiRheGlvcy5nZXQoJy91bmlkYWRlcycpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy51bmlkYWRlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB0aGlzLnBhZ2luYXRpb24udG90YWwgPSByZXNwb25zZS5kYXRhLmxlbmd0aDsKICAgICAgICAgIHRoaXMuZm9ybWF0VW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOwogICAgICAgICAgdGhpcy4kcmVmcy5TbmFja0Jhci5pbml0KGVycm9yLnJlc3BvbnNlLmRhdGFbMF0ubWVuc2FnZW0sICdlcnJvcicpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBmb3JtYXRVbmlkYWRlcygpIHsKICAgICAgaWYgKCF0aGlzLnVuaWRhZGVzKSByZXR1cm47CgogICAgICB0aGlzLnVuaWRhZGVzLmZvckVhY2godW5pZGFkZSA9PiB7CiAgICAgICAgdW5pZGFkZS5jcmVhdGVkQXQgPSBmb3JtYXRkYXRldGltZSh1bmlkYWRlLmNyZWF0ZWRBdCk7CiAgICAgICAgdW5pZGFkZS51cGRhdGVkQXQgPSBmb3JtYXRkYXRldGltZSh1bmlkYWRlLnVwZGF0ZWRBdCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBvbkVkaXQoaXRlbSkgewogICAgICB0aGlzLnNlbGVjdGVkID0gaXRlbTsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgb25EZWxldGUoaXRlbSkgewogICAgICB0aGlzLnNlbGVjdGVkID0gaXRlbTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSB0cnVlOwogICAgfSwKCiAgICBvbkNsb3NlRGVsZXRlKCkgewogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IGZhbHNlOwogICAgICB0aGlzLnNlbGVjdGVkID0gbnVsbDsKICAgIH0sCgogICAgYXN5bmMgb25EZWxldGVJdGVtQ29uZmlybSgpIHsKICAgICAgYXdhaXQgdGhpcy4kYXhpb3MuZGVsZXRlKGAvdW5pZGFkZXMvJHt0aGlzLnNlbGVjdGVkLmlkfWApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZmV0Y2hVbmlkYWRlcygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIG9uQ2FuY2VsRGlhbG9nKCkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7CiAgICB9LAoKICAgIG9uU2F2ZURpYWxvZyhpdGVtKSB7CiAgICAgIGNvbnN0IHNlbmRPYmogPSB7CiAgICAgICAgLi4uaXRlbSwKICAgICAgICBjcmVhdGVkQXQ6ICcnLAogICAgICAgIHVwZGF0ZWRBdDogJycsCiAgICAgIH07CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy91bmlkYWRlcycsIHNlbmRPYmopCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOwogICAgICAgICAgdGhpcy4kcmVmcy5TbmFja0Jhci5pbml0KGVycm9yLnJlc3BvbnNlLmRhdGFbMF0ubWVuc2FnZW0sICdlcnJvcicpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBvbkVkaXREaWFsb2coaXRlbSkgewogICAgICBjb25zdCBzZW5kT2JqID0gewogICAgICAgIC4uLml0ZW0sCiAgICAgICAgY3JlYXRlZEF0OiAnJywKICAgICAgICB1cGRhdGVkQXQ6ICcnLAogICAgICB9OwogICAgICB0aGlzLiRheGlvcy5wdXQoYC91bmlkYWRlcy8ke2l0ZW0uaWR9YCwgc2VuZE9iaikKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZmV0Y2hVbmlkYWRlcygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgICAgICB0aGlzLiRyZWZzLlNuYWNrQmFyLmluaXQoZXJyb3IucmVzcG9uc2UuZGF0YVswXS5tZW5zYWdlbSwgJ2Vycm9yJyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIG9uQWRkKCkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["Unidades.vue"],"names":[],"mappings":";AAkCA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Unidades.vue","sourceRoot":"src/views/unidade","sourcesContent":["<template>\n  <div>\n    <TabelaDinamica\n      title=\"Unidades\"\n      :headers=\"fields\"\n      :items=\"unidades\"\n      :pagination=\"pagination\"\n      :showbtnColumn=\"true\"\n      :showItemsPerPage=\"false\"\n      @onEdit=\"onEdit\"\n      @onDelete=\"onDelete\"\n      @onAdd=\"onAdd\"\n    />\n\n    <CadastrarUnidade\n      ref=\"CadastrarUnidade\"\n      v-if=\"showDialog\"\n      :item=\"selected\"\n      :showDialog=\"showDialog\"\n      @onCancelar=\"onCancelDialog\"\n      @onSalvar=\"onSaveDialog\"\n      @onEdit=\"onEditDialog\"\n    />\n\n    <DialogDelete\n      :dialogDelete=\"dialogDelete\"\n      @onDeleteItem=\"onDeleteItemConfirm\"\n      @onCancelDelete=\"dialogDelete = false\"\n    />\n    <SnackBar v-if=\"snackbar\" ref=\"SnackBar\"/>\n  </div>\n</template>\n\n<script>\nimport TabelaDinamica from '@/components/table/TabelaDinamica.vue';\nimport { formatdatetime } from '@/util/DateUtil.js';\nimport CadastrarUnidade  from './FormUnidade.vue';\nimport DialogDelete from '@/components/table/DeleteDialog.vue';\nimport SnackBar from '../../components/exception/SnackBar.vue';\n\nexport default {\n  name: 'Unidades',\n\n  components: {\n    TabelaDinamica,\n    CadastrarUnidade,\n    DialogDelete,\n    SnackBar,\n  },\n\n  data() {\n    return {\n      formatdatetime,\n      snackbar: false,\n      showDialog: false,\n      dialogDelete: false,\n      selected: null,\n      unidades: [],\n      fields: [\n        {\n          value: 'id',\n          text: 'ID',\n          align: 'center',\n        },\n        {\n          value: 'nome',\n          text: 'Nome',\n          align: 'center',\n        },\n        {\n          value: 'createdAt',\n          text: 'Data de Criação',\n          align: 'center',\n        },\n        {\n          value: 'updatedAt',\n          text: 'Data de Atualização',\n          align: 'center',\n        },\n        {\n          value: 'actions',\n          text: 'Ações',\n        },\n      ],\n      pagination: {\n        sortBy: 'ID',\n        page: 1,\n        total: 0,\n        pageCount: 1,\n        itemsPerPage: 100,\n      }\n    };\n  },\n\n  created() {\n    this.fetchUnidades();\n  },\n\n  methods: {\n    fetchUnidades() {\n      this.$axios.get('/unidades')\n        .then(response => {\n          this.unidades = response.data;\n          this.pagination.total = response.data.length;\n          this.formatUnidades();\n        })\n        .catch((error) => {\n          this.snackbar = true;\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    formatUnidades() {\n      if (!this.unidades) return;\n\n      this.unidades.forEach(unidade => {\n        unidade.createdAt = formatdatetime(unidade.createdAt);\n        unidade.updatedAt = formatdatetime(unidade.updatedAt);\n      });\n    },\n\n    onEdit(item) {\n      this.selected = item;\n      this.showDialog = true;\n    },\n\n    onDelete(item) {\n      this.selected = item;\n      this.dialogDelete = true;\n    },\n\n    onCloseDelete() {\n      this.dialogDelete = false;\n      this.selected = null;\n    },\n\n    async onDeleteItemConfirm() {\n      await this.$axios.delete(`/unidades/${this.selected.id}`)\n        .then(() => {\n          this.dialogDelete = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.snackbar = true;\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onCancelDialog() {\n      this.showDialog = false;\n      this.selected = null;\n    },\n\n    onSaveDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.post('/unidades', sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.snackbar = true;\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onEditDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.put(`/unidades/${item.id}`, sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n        .catch((error) => {\n          this.snackbar = true;\n          this.$refs.SnackBar.init(error.response.data[0].mensagem, 'error');\n        });\n    },\n\n    onAdd() {\n      this.showDialog = true;\n    },\n  }\n};\n</script>\n"]}]}