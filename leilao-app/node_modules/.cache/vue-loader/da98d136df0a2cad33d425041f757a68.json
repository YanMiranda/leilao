{"remainingRequest":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\src\\views\\unidade\\Unidades.vue","mtime":1711289101568},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711058648033},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1711058642101},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711058648033},{"path":"E:\\yan\\Projeto-leilão\\Selecao-Dev-AZ-master\\Selecao-Dev-AZ-master\\leilao-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1711058653993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUYWJlbGFEaW5hbWljYSBmcm9tICdAL2NvbXBvbmVudHMvdGFibGUvVGFiZWxhRGluYW1pY2EudnVlJzsKaW1wb3J0IHsgZm9ybWF0ZGF0ZXRpbWUgfSBmcm9tICdAL3V0aWwvRGF0ZVV0aWwuanMnOwppbXBvcnQgQ2FkYXN0cmFyVW5pZGFkZSAgZnJvbSAnLi9DYWRhc3RyYXJVbmlkYWRlLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VuaWRhZGVzJywKCiAgY29tcG9uZW50czogewogICAgVGFiZWxhRGluYW1pY2EsCiAgICBDYWRhc3RyYXJVbmlkYWRlLAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtYXRkYXRldGltZSwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICAgIHNlbGVjdGVkOiBudWxsLAogICAgICB1bmlkYWRlczogW10sCiAgICAgIGZpZWxkczogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgICAgdGV4dDogJ0lEJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnbm9tZScsCiAgICAgICAgICB0ZXh0OiAnTm9tZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRBdCcsCiAgICAgICAgICB0ZXh0OiAnRGF0YSBkZSBDcmlhw6fDo28nLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICd1cGRhdGVkQXQnLAogICAgICAgICAgdGV4dDogJ0RhdGEgZGUgQXR1YWxpemHDp8OjbycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2FjdGlvbnMnLAogICAgICAgICAgdGV4dDogJ0HDp8O1ZXMnLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBmZXRjaFVuaWRhZGVzKCkgewogICAgICB0aGlzLiRheGlvcy5nZXQoJy91bmlkYWRlcycpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy51bmlkYWRlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB0aGlzLmZvcm1hdFVuaWRhZGVzKCk7CiAgICAgICAgfSkKICAgIH0sCgogICAgZm9ybWF0VW5pZGFkZXMoKSB7CiAgICAgIGlmICghdGhpcy51bmlkYWRlcykgcmV0dXJuOwoKICAgICAgdGhpcy51bmlkYWRlcy5mb3JFYWNoKHVuaWRhZGUgPT4gewogICAgICAgIHVuaWRhZGUuY3JlYXRlZEF0ID0gZm9ybWF0ZGF0ZXRpbWUodW5pZGFkZS5jcmVhdGVkQXQpOwogICAgICAgIHVuaWRhZGUudXBkYXRlZEF0ID0gZm9ybWF0ZGF0ZXRpbWUodW5pZGFkZS51cGRhdGVkQXQpOwogICAgICB9KTsKICAgIH0sCgogICAgb25FZGl0KGl0ZW0pIHsKICAgICAgdGhpcy5zZWxlY3RlZCA9IGl0ZW07CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWU7CiAgICB9LAoKICAgIG9uRGVsZXRlKGl0ZW0pIHsKICAgICAgdGhpcy5zZWxlY3RlZCA9IGl0ZW07CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZTsKICAgIH0sCgogICAgb25DbG9zZURlbGV0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7CiAgICB9LAoKICAgIG9uRGVsZXRlSXRlbUNvbmZpcm0oKSB7CiAgICAgIHRoaXMuJGF4aW9zLmRlbGV0ZShgL3VuaWRhZGVzLyR7dGhpcy5zZWxlY3RlZC5pZH1gKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgfSwKCiAgICBvbkNhbmNlbERpYWxvZygpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBudWxsOwogICAgfSwKCiAgICBvblNhdmVEaWFsb2coaXRlbSkgewogICAgICBjb25zdCBzZW5kT2JqID0gewogICAgICAgIC4uLml0ZW0sCiAgICAgICAgY3JlYXRlZEF0OiAnJywKICAgICAgICB1cGRhdGVkQXQ6ICcnLAogICAgICB9OwogICAgICB0aGlzLiRheGlvcy5wb3N0KCcvdW5pZGFkZXMnLCBzZW5kT2JqKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5mZXRjaFVuaWRhZGVzKCk7CiAgICAgICAgfSkKICAgIH0sCgogICAgb25FZGl0RGlhbG9nKGl0ZW0pIHsKICAgICAgY29uc3Qgc2VuZE9iaiA9IHsKICAgICAgICAuLi5pdGVtLAogICAgICAgIGNyZWF0ZWRBdDogJycsCiAgICAgICAgdXBkYXRlZEF0OiAnJywKICAgICAgfTsKICAgICAgdGhpcy4kYXhpb3MucHV0KGAvdW5pZGFkZXMvJHtpdGVtLmlkfWAsIHNlbmRPYmopCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZldGNoVW5pZGFkZXMoKTsKICAgICAgICB9KQogICAgfSwKCiAgICBvbkFkZCgpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["Unidades.vue"],"names":[],"mappings":";AAoDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Unidades.vue","sourceRoot":"src/views/unidade","sourcesContent":["<template>\n  <div>\n    <TabelaDinamica\n      title=\"Unidades\"\n      :headers=\"fields\"\n      :items=\"unidades\"\n      :showbtnColumn=\"true\"\n      @onEdit=\"onEdit\"\n      @onDelete=\"onDelete\"\n      @onAdd=\"onAdd\"\n    />\n\n    <CadastrarUnidade\n      ref=\"CadastrarUnidade\"\n      v-if=\"showDialog\"\n      :item=\"selected\"\n      :showDialog=\"showDialog\"\n      @onCancelar=\"onCancelDialog\"\n      @onSalvar=\"onSaveDialog\"\n      @onEdit=\"onEditDialog\"\n    />\n\n    <v-dialog\n      persistent\n      v-model=\"dialogDelete\"\n      max-width=\"550px\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">Tem certeza que deseja apagar este item?</v-card-title>\n        <v-card-actions>\n          <v-btn\n            text\n            color=\"warning\"\n            @click=\"onCloseDelete\"\n          >\n            Cancelar\n          </v-btn>\n          <v-spacer></v-spacer>\n          <v-btn\n            text\n            color=\"error\"\n            @click=\"onDeleteItemConfirm\"\n          >\n            Sim, Apagar\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport TabelaDinamica from '@/components/table/TabelaDinamica.vue';\nimport { formatdatetime } from '@/util/DateUtil.js';\nimport CadastrarUnidade  from './CadastrarUnidade.vue';\n\nexport default {\n  name: 'Unidades',\n\n  components: {\n    TabelaDinamica,\n    CadastrarUnidade,\n  },\n\n  data() {\n    return {\n      formatdatetime,\n      showDialog: false,\n      dialogDelete: false,\n      selected: null,\n      unidades: [],\n      fields: [\n        {\n          value: 'id',\n          text: 'ID',\n          align: 'center',\n        },\n        {\n          value: 'nome',\n          text: 'Nome',\n          align: 'center',\n        },\n        {\n          value: 'createdAt',\n          text: 'Data de Criação',\n          align: 'center',\n        },\n        {\n          value: 'updatedAt',\n          text: 'Data de Atualização',\n          align: 'center',\n        },\n        {\n          value: 'actions',\n          text: 'Ações',\n        },\n      ],\n    };\n  },\n\n  created() {\n    this.fetchUnidades();\n  },\n\n  methods: {\n    fetchUnidades() {\n      this.$axios.get('/unidades')\n        .then(response => {\n          this.unidades = response.data;\n          this.formatUnidades();\n        })\n    },\n\n    formatUnidades() {\n      if (!this.unidades) return;\n\n      this.unidades.forEach(unidade => {\n        unidade.createdAt = formatdatetime(unidade.createdAt);\n        unidade.updatedAt = formatdatetime(unidade.updatedAt);\n      });\n    },\n\n    onEdit(item) {\n      this.selected = item;\n      this.showDialog = true;\n    },\n\n    onDelete(item) {\n      this.selected = item;\n      this.dialogDelete = true;\n    },\n\n    onCloseDelete() {\n      this.dialogDelete = false;\n      this.selected = null;\n    },\n\n    onDeleteItemConfirm() {\n      this.$axios.delete(`/unidades/${this.selected.id}`)\n        .then(() => {\n          this.dialogDelete = false;\n          this.fetchUnidades();\n        })\n    },\n\n    onCancelDialog() {\n      this.showDialog = false;\n      this.selected = null;\n    },\n\n    onSaveDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.post('/unidades', sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n    },\n\n    onEditDialog(item) {\n      const sendObj = {\n        ...item,\n        createdAt: '',\n        updatedAt: '',\n      };\n      this.$axios.put(`/unidades/${item.id}`, sendObj)\n        .then(() => {\n          this.showDialog = false;\n          this.fetchUnidades();\n        })\n    },\n\n    onAdd() {\n      this.showDialog = true;\n    },\n  }\n};\n</script>\n"]}]}